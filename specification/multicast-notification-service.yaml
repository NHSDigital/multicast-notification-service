# This is an OpenAPI Specification (https://swagger.io/specification/)
# for the multicast-notification-service owned by NHS Digital (https://digital.nhs.uk/)
asyncapi: 3.0.0
info:
  title: Multicast Notification Service
servers:
  production:
    host: https://api.service.nhs.uk/multicast-notification-service
    protocol: https
    description: The production server for the Multicast Notification Service.
channels:
  events:
    address: '/events'
    messages:
      pdsChangeOfGp:
        contentType: 'application/json'
        description: 'A PDS Change of GP event. This is created when a patient's registered GP Practice changes.'
        payload:
          $ref: "components/schemas/cloudevents/pdsChangeOfGpEvent.yaml"
operations:
  receiveEvent:
    action: 'receive'
    description: 'Following the creation of a subscription, you can receive any of the following events in your requested endpoint.' 
    channel:
      $ref: '#/channels/events'
    messages:
      pdsChangeOfGpJson:
        contentType: 'application/json'
        description: 'An MNS JSON signal for a patient PDS Change of GP'
        payload:
          $ref: "components/schemas/cloudevents/pdsChangeOfGpMnsJsonSignal.yaml"
